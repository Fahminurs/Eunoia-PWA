<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
    <meta name="apple-mobile-web-app-capable" content="yes">  
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">  
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />  
    <title>Breathing</title>  
    <style>  
        @import url('https://cdn-uicons.flaticon.com/2.5.1/uicons-bold-rounded/css/uicons-bold-rounded.css');  
        @import url('https://fonts.googleapis.com/css2?family=Playwrite+GB+S:ital,wght@0,100..400;1,100..400&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Sankofa+Display&display=swap');  
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap');

        @keyframes gradientBG {  
            0% { background-position: 0% 50%; }  
            50% { background-position: 100% 50%; }  
            100% { background-position: 0% 50%; }  
        }  

        @keyframes fadeIn {  
            from { opacity: 0; }  
            to { opacity: 1; }  
        }  

        @keyframes fadeOut {  
            from { opacity: 1; }  
            to { opacity: 0; }  
        }  

        body {  
            font-family: 'fredoka', sans-serif;  
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);  
            background-size: 400% 400%;  
            animation: gradientBG 15s ease infinite;  
            min-height: 100vh;  
            margin: 0;  
            display: flex;  
            font-weight: 800;
            flex-direction: column;  
            justify-content: center;  
            align-items: center;  
            position: relative; /* Added */  
        }  

        .persiapan-breath {  
            position: absolute;  
            top: 50%;  
            left: 50%;  
            transform: translate(-50%, -50%);  
            max-width: 70%;  
            z-index: 100;  
        }  

        h1 {  
            color: white;  
            margin-bottom: 20px;  
            font-size: 2.5rem;  
            font-weight: bold;  
        }  

        .cosmic-container {  
            position: relative;  
            width: 300px;  
            height: 300px;  
            margin: 0 auto 20px;  
        }  

        @keyframes planetGlow {  
            0% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.7); }  
            50% { box-shadow: 0 0 50px rgba(255, 215, 0, 1), 0 0 50px rgba(255, 215, 0, 0.5); }  
            100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.7); }  
        }  
        .planet {  
            width: 30px;  
            height: 30px;  
            background: radial-gradient(circle at 30% 30%, #ffd700, #ffa500);  
            border-radius: 50%;  
            position: absolute;  
            top: 50%;  
            left: 50%;  
            transform: translate(-50%, -50%);  
            animation: planetGlow 1.5s infinite;  
            transition: all 0.1s linear;  
        } 
        .breath-limit {  
            width: 300px;  
            height: 300px;  
            border: 4px dashed rgba(255, 255, 255, 0.7);  
            border-radius: 50%;  
            position: absolute;  
            top: 50%;  
            left: 50%;  
            transform: translate(-50%, -50%);  
        }  

        .center-point {  
            width: 60px;  
            height: 60px;  
            background-color: white;  
            border-radius: 50%;  
            position: absolute;  
            top: 50%;  
            left: 50%;  
            transform: translate(-50%, -50%);  
            z-index: 10;  
            display: flex;  
            flex-direction: column;  
            justify-content: center;  
            align-items: center;  
            font-size: 24px;  
            color: #23a6d5;  
            font-weight: bold;  
        }  

        .center-point #timer {  
            font-size: 24px;  
        }  

   
        #instruction {  
            font-size: 20px;  
            color: white;  
            letter-spacing: 1px;
            margin-bottom: 15px;  
            opacity: 1;  
            z-index: 101;  
            text-align: center;
            position: absolute;  
            top: 150px;  
            left: 50%;  
            width: 540px;
            transform: translate(-50%, -50%);  
            background-color: #a01dd4;  
            padding: 5px 10px;  
            border-radius: 20px;  
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1);  
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);  
        }  

        #repeatButton {  
            background-color: rgba(255, 255, 255, 0.2);  
            border: 2px solid white;  
            color: white;  
            padding: 10px 20px;  
            border-radius: 5px;  
            cursor: pointer;  
            transition: all 0.3s;  
        }  

        #repeatButton:hover {  
            background-color: white;  
            color: #e73c7e;  
        }  

        #overlay {  
            position: fixed;  
            top: 0;  
            left: 0;  
            width: 100%;  
            height: 100%;  
            background-color: rgba(0, 0, 0, 0.8);  
            display: flex;  
            justify-content: center;  
            align-items: center;  
            color: white;  
            font-size: 5rem;  
            z-index: 1000;  
        }  

        .stars {  
            position: fixed;  
            top: 0;  
            left: 0;  
            width: 100%;  
            height: 100%;  
            pointer-events: none;  
        }  

        .star {  
            position: absolute;  
            background-color: white;  
            border-radius: 50%;  
            animation: twinkle 2s infinite;  
        }  

        .ulangi-pernapasan {  
            position: relative;  
            top: 50px;  
            display: flex;  
            align-items: center;  
        }  

        .fi-br-arrows-repeat {  
            margin: 0 4px 0 0;  
        }  

        @keyframes twinkle {  
            0%, 100% { opacity: 1; }  
            50% { opacity: 0.5; }  
        }  
    </style>  
</head>  
<body>  
    <div id="overlay">3</div>  

    <h1></h1>  

    <div id="instruction" class="persiapan-breath">Rasakan kedamaian dalam setiap hembusan</div>  

    <div class="cosmic-container">  
        <div class="breath-limit"></div>  
        <div id="planet" class="planet"></div>  
        <div id="centerPoint" class="center-point">  
            <div id="timer">0</div>  
        </div>  
    </div>  

    <button id="repeatButton" class="ulangi-pernapasan"> <span><i class="fi fi-br-arrows-repeat"></i></span>Ulangi</button>  

    <div id="starsContainer" class="stars"></div>  

    <script>  
        const planet = document.getElementById('planet');  
        const centerPoint = document.getElementById('centerPoint');  
        const timerDisplay = centerPoint.querySelector('#timer');  
        const repeatButton = document.getElementById('repeatButton');  
        const overlay = document.getElementById('overlay');  
        const instruction = document.getElementById('instruction');  
        let intervalId, timerIntervalId, animationId;  

        const prepareDuration = 5000;  
        const inhaleDuration = 4000;  
        const holdDuration = 7000;  
        const exhaleDuration = 8000;  
        const totalCycleDuration = prepareDuration + 400 + inhaleDuration + 700 + holdDuration + 800 + exhaleDuration;  

        function createStars() {  
            const starsContainer = document.getElementById('starsContainer');  
            for (let i = 0; i < 100; i++) {  
                const star = document.createElement('div');  
                star.classList.add('star');  
                star.style.width = `${Math.random() * 3}px`;  
                star.style.height = star.style.width;  
                star.style.left = `${Math.random() * 100}%`;  
                star.style.top = `${Math.random() * 100}%`;  
                star.style.animationDelay = `${Math.random() * 2}s`;  
                starsContainer.appendChild(star);  
            }  
        }  

        function formatTime(ms) {  
            return Math.max(Math.ceil(ms / 1000), 0).toString();  
        }  

        function updateTimer(duration, timerElement) {  
            let remainingTime = duration;  
            timerElement.textContent = formatTime(remainingTime);  

            clearInterval(timerIntervalId);  
            timerIntervalId = setInterval(() => {  
                remainingTime -= 1000;  
                timerElement.textContent = formatTime(remainingTime);  
                if (remainingTime <= 0) {  
                    clearInterval(timerIntervalId);  
                }  
            }, 1000);  
        }  

        function animatePlanetSize(start, end, duration, onComplete) {  
            const startTime = performance.now();  
            
            function update(currentTime) {  
                const elapsed = currentTime - startTime;  
                const progress = Math.min(elapsed / duration, 1);  
                const size = start + (end - start) * progress;  
                
                planet.style.width = `${size}px`;  
                planet.style.height = `${size}px`;  

                if (progress < 1) {  
                    animationId = requestAnimationFrame(update);  
                } else {  
                    cancelAnimationFrame(animationId);  
                    if (onComplete) onComplete();  
                }  
            }  

            animationId = requestAnimationFrame(update);  
        }  

        function animateInstruction(text, color) {  
            instruction.style.animation = 'fadeOut 1s forwards';  
            setTimeout(() => {  
                instruction.textContent = text;  
                instruction.style.color = color;  
                instruction.style.animation = 'fadeIn 1s forwards';  
            }, 1000);  
        }  

        function animatePlanet() {  
            // Prepare  
            animateInstruction("Rasakan kedamaian dalam setiap hembusan", 'white');  
            setTimeout(() => {  
                // Inhale  
                animateInstruction("Tarik Nafas", '#ffd700');  
                updateTimer(inhaleDuration, timerDisplay);  
                animatePlanetSize(20, 300, inhaleDuration);  
            }, prepareDuration);  

            // Prepare to hold  
            setTimeout(() => {  
                animateInstruction(" ", 'white');  
            }, prepareDuration + inhaleDuration + 100);  

            // Hold  
            setTimeout(() => {  
                animateInstruction("Tahan", '#ff69b4');  
                updateTimer(holdDuration, timerDisplay);  
            }, prepareDuration + inhaleDuration + 700);  

            // Prepare to exhale  
            setTimeout(() => {  
                animateInstruction(" ", 'white');  
            }, prepareDuration + inhaleDuration + holdDuration + 800);  

            // Exhale  
            setTimeout(() => {  
                animateInstruction("Hembuskan", '#00ffff');  
                updateTimer(exhaleDuration, timerDisplay);  
                animatePlanetSize(300, 20, exhaleDuration);  
            }, prepareDuration + inhaleDuration + holdDuration + 900);  

            // Reset  
            setTimeout(() => {  
                animateInstruction("Rasakan kedamaian dalam setiap hembusan", 'white');  
                clearInterval(intervalId);  
            }, totalCycleDuration);  
        }  

        function startAnimation() {  
            if (intervalId) {  
                clearInterval(intervalId);  
                clearInterval(timerIntervalId);  
                cancelAnimationFrame(animationId);  
            }  
            animatePlanet();  
            intervalId = setInterval(animatePlanet, totalCycleDuration);  
        }  

        function startOverlay() {  
            let count = 3;  
            overlay.textContent = count;  
            const countdownInterval = setInterval(() => {  
                count--;  
                if (count > 0) {  
                    overlay.textContent = count;  
                } else {  
                    clearInterval(countdownInterval);  
                    overlay.style.display = 'none';  
                    startAnimation();  
                }  
            }, 1000);  
        }  

        repeatButton.addEventListener('click', () => {  
            overlay.style.display = 'flex';  
            startOverlay();  
        });  

        window.onload = () => {  
            createStars();  
            startOverlay();  
        };  
    </script>  
</body>  
</html>